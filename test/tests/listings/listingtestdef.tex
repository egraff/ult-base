\begin{filecontents*}{samplecode.c}
#include <stdio.h>

int main(void)
{
  printf("Hello world!\n");
  return 0;
}
\end{filecontents*}

\floatstyle{plaintop}
\newfloat{code}{!tbph}{myc}

\lstset{%
  basicstyle=\usefont{T1}{pcr}{m}{n},%
  captionpos=b,%
  numbers=left,%
  backgroundcolor=\color[rgb]{0.9,0.9,1}%
}

\makeatletter
\newcustomlstenvironment{codesnippet}{locodesnippet}{Code Snippet}[1][]
  {%
   \lstset{#1,language=C,frame=tb,captionpos=t,backgroundcolor=\color[rgb]{1,1,0.9}}%
   \csname lst@SetFirstNumber\endcsname}
  {\csname lst@SaveFirstNumber\endcsname}

\newcustomlstenvironment{algorithm}{loalgorithm}{Algorithm}[2][]
  {%
   \leavevmode%
   \lst@TestEOLChar{#2}%
   \lstset{#1,language=C,frame=tblr,captionpos=t,backgroundcolor=\color[rgb]{0.9,1,0.9}}%
   \csname lst@SetFirstNumber\endcsname}
  {\csname lst@SaveFirstNumber\endcsname}
\makeatother
